(function(){"use strict";const b=Symbol("Comlink.proxy"),L=Symbol("Comlink.endpoint"),C=Symbol("Comlink.releaseProxy"),E=Symbol("Comlink.thrown"),S=t=>typeof t=="object"&&t!==null||typeof t=="function",R={canHandle:t=>S(t)&&t[b],serialize(t){const{port1:e,port2:n}=new MessageChannel;return p(t,e),[n,[n]]},deserialize(t){return t.start(),N(t)}},T={canHandle:t=>S(t)&&E in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},M=new Map([["proxy",R],["throw",T]]);function p(t,e=self){e.addEventListener("message",function n(s){if(!s||!s.data)return;const{id:o,type:l,path:a}=Object.assign({path:[]},s.data),i=(s.data.argumentList||[]).map(h);let r;try{const c=a.slice(0,-1).reduce((u,m)=>u[m],t),f=a.reduce((u,m)=>u[m],t);switch(l){case"GET":r=f;break;case"SET":c[a.slice(-1)[0]]=h(s.data.value),r=!0;break;case"APPLY":r=f.apply(c,i);break;case"CONSTRUCT":{const u=new f(...i);r=x(u)}break;case"ENDPOINT":{const{port1:u,port2:m}=new MessageChannel;p(t,m),r=j(u,[u])}break;case"RELEASE":r=void 0;break;default:return}}catch(c){r={value:c,[E]:0}}Promise.resolve(r).catch(c=>({value:c,[E]:0})).then(c=>{const[f,u]=w(c);e.postMessage(Object.assign(Object.assign({},f),{id:o}),u),l==="RELEASE"&&(e.removeEventListener("message",n),P(e))})}),e.start&&e.start()}function O(t){return t.constructor.name==="MessagePort"}function P(t){O(t)&&t.close()}function N(t,e){return y(t,[],e)}function d(t){if(t)throw new Error("Proxy has been released and is not useable")}function y(t,e=[],n=function(){}){let s=!1;const o=new Proxy(n,{get(l,a){if(d(s),a===C)return()=>g(t,{type:"RELEASE",path:e.map(i=>i.toString())}).then(()=>{P(t),s=!0});if(a==="then"){if(e.length===0)return{then:()=>o};const i=g(t,{type:"GET",path:e.map(r=>r.toString())}).then(h);return i.then.bind(i)}return y(t,[...e,a])},set(l,a,i){d(s);const[r,c]=w(i);return g(t,{type:"SET",path:[...e,a].map(f=>f.toString()),value:r},c).then(h)},apply(l,a,i){d(s);const r=e[e.length-1];if(r===L)return g(t,{type:"ENDPOINT"}).then(h);if(r==="bind")return y(t,e.slice(0,-1));const[c,f]=k(i);return g(t,{type:"APPLY",path:e.map(u=>u.toString()),argumentList:c},f).then(h)},construct(l,a){d(s);const[i,r]=k(a);return g(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:i},r).then(h)}});return o}function H(t){return Array.prototype.concat.apply([],t)}function k(t){const e=t.map(w);return[e.map(n=>n[0]),H(e.map(n=>n[1]))]}const A=new WeakMap;function j(t,e){return A.set(t,e),t}function x(t){return Object.assign(t,{[b]:!0})}function w(t){for(const[e,n]of M)if(n.canHandle(t)){const[s,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:s},o]}return[{type:"RAW",value:t},A.get(t)||[]]}function h(t){switch(t.type){case"HANDLER":return M.get(t.name).deserialize(t.value);case"RAW":return t.value}}function g(t,e,n){return new Promise(s=>{const o=_();t.addEventListener("message",function l(a){!a.data||!a.data.id||a.data.id!==o||(t.removeEventListener("message",l),s(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)})}function _(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const V=(t,e)=>t[e].filter(n=>n),z=(t,e)=>t.map(n=>n[e]).filter(n=>n),D=(t,e,n,s,o)=>{const l=Math.floor(e/s)*s,a=Math.floor(n/o)*o,i=[];for(let r=l;r<l+s;r++)for(let c=a;c<a+o;c++)t[r][c]&&i.push(t[r][c]);return i};class F{constructor(e){this.board=e,this.m=Math.floor(Math.sqrt(e.length)),this.n=e.length/this.m,this.length=e.length,this.isFinished=!1,this.solution=[]}search(e=0,n=0){if(n===this.length&&(n=0,e+=1,e===this.length)){this.solution.push(this.board.map(o=>[...o])),this.isFinished=!0;return}if(this.board[e][n]){n+=1,this.search(e,n);return}const s=this.constructCandidates(this.board,e,n,this.m,this.n);for(let o=0;o<s.length;o++)if(this.board[e][n]=s[o],this.search(e,n+1),this.board[e][n]=0,this.isFinished)return}constructCandidates(e,n,s,o,l){const a=new Set([...V(e,n),...z(e,s),...D(e,n,s,o,l)]),i=[];for(let r=1;r<=e.length;r++)a.has(r)||i.push(r);return i}}p(F)})();
